{% extends "layout.html" %}

{% block title %}
    Profile
{% endblock %}

{% block main %}
    <div class="header">
        <h1>Your Profile</h1>
        <h3>{{ username[0]['username'] }}</h3>
    </div>
    <div class="container">
        <form name="pics" method="POST" class="profile_pics_container">
            <div class="display_image" id="display_image_p" style="background-image: url(../static/images/homies_pictures/{{ username }}/{{ username }}_pics/{{ pp }})">     
                <!--PP delete-->
                <input class="x_button" formaction="/x_profile" type="submit" name="x_pp" value="X"></div> 
            <div class="display_image" id="display_image_2" style="background-image: url(../static/images/homies_pictures/{{ username }}/{{ username }}_pics/{{ p2 }})">
                <!--P2 delete-->
                <input class="x_button" formaction="/x_p2" type="submit" name="x_p2" value="X"></div>
            <div class="display_image" id="display_image_3" style="background-image: url(../static/images/homies_pictures/{{ username }}/{{ username }}_pics/{{ p3 }})">
                <!--P3 delete-->
                <input class="x_button" formaction="/x_p3" type="submit" name="x_p3" value="X"></div>
            <div></div>
            <div><!--PP upload-->
                <input method="GET" type="file" id="profile_pic" name="profile_pic" style="display: none">
                <input class="p_button" type="button" value="Add Profile Picture" onclick="document.getElementById('profile_pic').click();" />
                <!--P2 upload-->
                <input class="choose_file" type="file" id="pic2" name="pic2" style="display: none">
                <input class="p_button" type="button" value="Add Picture2" onclick="document.getElementById('pic2').click();" />
                <!--P3 upload-->
                <input class="choose_file" type="file" id="pic3" name="pic3" style="display: none">
                <input class="p_button" type="button" value="Add Picture3" onclick="document.getElementById('pic3').click();" /></div>   
            <div class="display_image" id="display_image_4" style="background-image: url(../static/images/homies_pictures/{{ username }}/{{ username }}_pics/{{ p4 }})">
                <!--P4 delete-->
                <input class="x_button" formaction="/x_p4" type="submit" name="x_p4" value="X"></div>
            <div class="display_image" id="display_image_5" style="background-image: url(../static/images/homies_pictures/{{ username }}/{{ username }}_pics/{{ p5 }})">
                <!--P5 delete-->
                <input class="x_button" formaction="/x_p5" type="submit" name="x_p5" value="X"></div>
            <div class="display_image" id="display_image_6" style="background-image: url(../static/images/homies_pictures/{{ username }}/{{ username }}_pics/{{ p6 }})">
                <!--P6 delete-->
                <input class="x_button" formaction="/x_p6" type="submit" name="x_p6" value="X"></div>
            <div>
                <!--P4 upload-->
                <input class="choose_file" type="file" id="pic4" name="pic4" style="display: none">
                <input class="p_button" type="button" value="Add Picture4" onclick="document.getElementById('pic4').click();" />
                <!--P5 upload-->
                <input class="choose_file" type="file" id="pic5" name="pic5" style="display: none">
                <input class="p_button" type="button" value="Add Picture5" onclick="document.getElementById('pic5').click();" />
                <!--P6 upload-->
                <input class="choose_file" type="file" id="pic6" name="pic6" style="display: none">
                <input class="p_button" type="button" value="Add Picture6" onclick="document.getElementById('pic6').click();" />
            </div>
            <input type="submit" name="submit" value="Save Pictures">
        </form>
    </div>

    <script>
        //profile picture
        const profile_pic = document.querySelector("#profile_pic");
        var uploaded_image = "";

        profile_pic.addEventListener("change", function(){
            const reader = new FileReader();
            reader.addEventListener("load", () => {
                uploaded_image = reader.result;
                document.querySelector("#display_image_p").style.backgroundImage = `url(${uploaded_image})`;

                //Troubleshoot! Display img url
                const url = `url(${uploaded_image})`;
                console.log(url)

            });
            reader.readAsDataURL(this.files[0]);
        })


        //pic2
        const pic2 = document.querySelector("#pic2");
        var uploaded_image = "";

        pic2.addEventListener("change", function(){
            const reader = new FileReader();
            reader.addEventListener("load", () => {
                uploaded_image = reader.result;
                document.querySelector("#display_image_2").style.backgroundImage = `url(${uploaded_image})`;
            });
            reader.readAsDataURL(this.files[0]);
        })


         //pic3
        const pic3 = document.querySelector("#pic3");
        var uploaded_image = "";

        pic3.addEventListener("change", function(){
            const reader = new FileReader();
            reader.addEventListener("load", () => {
                uploaded_image = reader.result;
                document.querySelector("#display_image_3").style.backgroundImage = `url(${uploaded_image})`;
            });
            reader.readAsDataURL(this.files[0]);
        })

        
        //pic4
        const pic4 = document.querySelector("#pic4");
        var uploaded_image = "";

        pic4.addEventListener("change", function(){
            const reader = new FileReader();
            reader.addEventListener("load", () => {
                uploaded_image = reader.result;
                document.querySelector("#display_image_4").style.backgroundImage = `url(${uploaded_image})`;
            });
            reader.readAsDataURL(this.files[0]);
        })


        //pic5
        const pic5 = document.querySelector("#pic5");
        var uploaded_image = "";

        pic5.addEventListener("change", function(){
            const reader = new FileReader();
            reader.addEventListener("load", () => {
                uploaded_image = reader.result;
                document.querySelector("#display_image_5").style.backgroundImage = `url(${uploaded_image})`;
            });
            reader.readAsDataURL(this.files[0]);
        })


        //pic6
        const pic6 = document.querySelector("#pic6");
        var uploaded_image = "";

        pic6.addEventListener("change", function(){
            const reader = new FileReader();
            reader.addEventListener("load", () => {
                uploaded_image = reader.result;
                document.querySelector("#display_image_6").style.backgroundImage = `url(${uploaded_image})`;
            });
            reader.readAsDataURL(this.files[0]);
        })
    </script>


    <div id="profile_qs">
        <form id="qs" method="POST">
        <!--Gender-->
            <p>What is your gender? &emsp;<b>{{ gender[0]['gender'] }}</b></p>
            <input type="radio" id="male" name="gender" value="Male">
                <label for="male">Male</label><br>
            <input type="radio" id="female" name="gender" value="Female">
                <label for="female">Female</label><br>
            <input type="radio" id="other" name="gender" value="Other">
                <label for="other">Other</label><br>

        <!--Interested in rooming with which gender-->
            <p>With which gender(s) would you be comfortable living with? &emsp;<b>{{ gender_pref[0]['gender_comfort'] }}</b></p>
            <input type="checkbox" id="male" name="gender_comfort" value="Male">
                <label for="male">Male</label><br>
            <input type="checkbox" id="female" name="gender_comfort" value="Female">
                <label for="female">Female</label><br>
            <input type="checkbox" id="other" name="gender_comfort" value="Other">
                <label for="other">Other</label><br>

        <!--Pets!-->
            <p>Would you be comfortable living with pets? &emsp;<b>{{ pets_test[0]['pets_test'] }}</b></p>
            <input type="checkbox" id="dogs" name="pets_test" value="Dogs">
                <label for="dogs">Dogs</label><br>
            <input type="checkbox" id="cats" name="pets_test" value="Cats">
                <label for="cats">Cats</label><br>

        <!--Add Distance Preferences-->
            <p>Distance Preference: &emsp;<b>{{ distance_pref[0]['distance_pref'] }} mi</b></p>
            <input type="range" class="slider" min="1" max="50" name="distance" id="distance" value="{{ distance_pref[0]['distance_pref'] }}">
            <p><span id="miles"></span> mi</p><br>
            <script>
                var slider = document.getElementById("distance");
                var output = document.getElementById("miles");
                output.innerHTML = slider.value; // Display the default slider value

                // Update the current slider value (each time you drag the slider handle)
                slider.oninput = function() {
                output.innerHTML = this.value;
                }
            </script>

            <textarea id="bio" name="bio" type="text" placeholder="Enter a bio: 700 character limit" maxlength="700">{{ bio[0]['bio'] }}</textarea>
            <div></div>

        <!--Save Changes-->
            <input name="save_qs" id="save_qs" type="submit" value="Save">
        </form>
    </div>
{% endblock %}